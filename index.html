<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>YiTalk - Simultaneous Interpretation</title>
    <!-- Pinyin Library (jsDelivr for better China access) -->
    <script src="https://cdn.jsdelivr.net/npm/pinyin-pro@3.18.2/dist/index.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>
        <div class="brand">
            <img src="./logo.png" alt="YiTalk Logo" class="logo">
            <h1>YiTalk</h1>
        </div>
        <button id="settingsBtn" class="icon-btn" aria-label="Settings">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="currentColor">
                <path
                    d="M480-160q-33 0-56.5-23.5T400-240q0-33 23.5-56.5T480-320q33 0 56.5 23.5T560-240q0 33-23.5 56.5T480-160Zm-56-160v-80h112v80H424Zm56-160q-33 0-56.5-23.5T400-560q0-33 23.5-56.5T480-640q33 0 56.5 23.5T560-560q0 33-23.5 56.5T480-480Z" />
                <path
                    d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-364l104-78q-1-9-2-17t-1-17q0-9 1-17t2-17l-104-78 110-189 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 189-104 78q1 9 2 17t1 17q0 9-1 17t-2 17l104 78-110 189-119-50q-11 8-23 15t-24 12l-16 128H370Zm62-120q66 0 113-47t47-113q0-66-47-113t-113-47q-66 0-113 47t-47 113q0 66 47 113t113 47Z" />
            </svg>
        </button>
    </header>

    <main id="outputContainer">
        <div id="welcomeMessage" class="message-card system-message">
            <p>マイクボタンを押して、中国語で話しかけてください。<br>設定からDeepSeek APIキーを入力すると、高精度の翻訳が利用できます。</p>
        </div>
        <!-- Dynamic content will be injected here -->
    </main>

    <div class="controls">
        <div class="controls-top">
            <select id="quickModelSelect" class="model-pill">
                <option value="deepseek">DeepSeek V3</option>
                <option value="gemini">Google Gemini</option>
                <option value="google">Google Translate</option>
                <option value="free">Free (MyMemory)</option>
            </select>
        </div>
        <div class="controls-main">
            <button id="micBtnSource" class="mic-btn split-btn">
                <div class="mic-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"
                        fill="currentColor">
                        <path
                            d="M480-400q-50 0-85-35t-35-85v-240q0-50 35-85t85-35q50 0 85 35t35 85v240q0 50-35 85t-85 35Z" />
                        <path
                            d="M440-160v-123q-106-15-173-94.5T200-560h80q0 83 58.5 141.5T480-360q83 0 141.5-58.5T680-560h80q0 102-67 182.5T520-283v123h-80Z" />
                    </svg>
                </div>
                <div class="btn-labels">
                    <span class="lang-label" id="labelSource">Chinese</span>
                    <span class="status-label">Tap to Speak</span>
                </div>
            </button>

            <button id="micBtnTarget" class="mic-btn split-btn">
                <div class="mic-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"
                        fill="currentColor">
                        <path
                            d="M480-400q-50 0-85-35t-35-85v-240q0-50 35-85t85-35q50 0 85 35t35 85v240q0 50-35 85t-85 35Z" />
                        <path
                            d="M440-160v-123q-106-15-173-94.5T200-560h80q0 83 58.5 141.5T480-360q83 0 141.5-58.5T680-560h80q0 102-67 182.5T520-283v123h-80Z" />
                    </svg>
                </div>
                <div class="btn-labels">
                    <span class="lang-label" id="labelTarget">Japanese</span>
                    <span class="status-label">Tap to Speak</span>
                </div>
            </button>
        </div>
    </div>

    <dialog id="settingsDialog">
        <form method="dialog">
            <h2>Settings / 設定</h2>

            <div class="api-keys-section">
                <label for="deepseekKey">DeepSeek API Key</label>
                <input type="password" id="deepseekKey" placeholder="sk-...">

                <label for="geminiKey">Google Gemini API Key</label>
                <input type="password" id="geminiKey" placeholder="AIza...">

                <label for="googleKey">Google Cloud Translate Key</label>
                <input type="password" id="googleKey" placeholder="AIza...">
            </div>
            <p class="hint" style="margin-top: 10px;">Select the mode below to choose which key to use.</p>

            <label for="sourceLang">Left Button Language (左のボタン)</label>
            <select id="sourceLang">
                <option value="zh-CN">Chinese (中国語)</option>
                <option value="en-US">English (英語)</option>
                <option value="ja-JP">Japanese (日本語)</option>
                <option value="ko-KR">Korean (韓国語)</option>
                <option value="fr-FR">French (フランス語)</option>
                <option value="de-DE">German (ドイツ語)</option>
                <option value="es-ES">Spanish (スペイン語)</option>
                <option value="it-IT">Italian (イタリア語)</option>
                <option value="ru-RU">Russian (ロシア語)</option>
                <option value="vi-VN">Vietnamese (ベトナム語)</option>
                <option value="th-TH">Thai (タイ語)</option>
                <option value="id-ID">Indonesian (インドネシア語)</option>
            </select>

            <label for="targetLang">Right Button Language (右のボタン)</label>
            <select id="targetLang">
                <option value="Japanese">Japanese (日本語)</option>
                <option value="English">English (英語)</option>
                <option value="Chinese">Chinese (中国語)</option>
                <option value="Korean">Korean (韓国語)</option>
                <option value="French">French (フランス語)</option>
                <option value="German">German (ドイツ語)</option>
                <option value="Spanish">Spanish (スペイン語)</option>
                <option value="Italian">Italian (イタリア語)</option>
                <option value="Russian">Russian (ロシア語)</option>
                <option value="Vietnamese">Vietnamese (ベトナム語)</option>
                <option value="Thai">Thai (タイ語)</option>
                <option value="Indonesian">Indonesian (インドネシア語)</option>
            </select>

            <label for="translationMode">Mode</label>
            <select id="translationMode">
                <option value="deepseek">DeepSeek V3 (Recommended for China)</option>
                <option value="gemini">Google Gemini (Recommended Global)</option>
                <option value="google">Google Translate API</option>
                <option value="free">Free - MyMemory (Limited)</option>
                <option value="manual">Manual / None</option>
            </select>

            <div class="dialog-actions">
                <button value="cancel" class="btn-text">Cancel</button>
                <button value="save" id="saveSettings" class="btn-primary">Save</button>
            </div>
        </form>
    </dialog>

    <script src="script.js"></script>
</body>

</html>